/*!
* Copyright (c) 2015 Carrot Creative
*
* Permission is hereby granted, free of charge, to any person obtaining
* a copy of this software and associated documentation files (the
* "Software"), to deal in the Software without restriction, including
* without limitation the rights to use, copy, modify, merge, publish,
* distribute, sublicense, and/or sell copies of the Software, and to
* permit persons to whom the Software is furnished to do so, subject to
* the following conditions:
*
* The above copyright notice and this permission notice shall be
* included in all copies or substantial portions of the Software.
*
* THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
* EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
* MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
* NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
* LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
* OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
* WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
*/(function(e,t){function n(){function n(e){var t=/([a-zA-Z]+)\(([-a-zA-Z0-9\.\,\s%]+)\)/g,n,r={},i,s,o;while(n=t.exec(e))r[n[1]]=function(e){i=[];for(var t=0;t<e.length;t++){s=parseFloat(e[t]);if(o=e[t].match(/([a-zA-Z%]+)/))o=o[1];i.push({num:s,unit:o})}return i}(n[2].split(/,\s?/));return r}function r(e){e=new String(e);var t=/([-0-9\.]+)([a-zA-Z%]{1,3})?/g,n=[],r,i,s;while(r=t.exec(e))n.push({num:parseFloat(r[1]),unit:r[2]});return n}function h(e,t,n){var r=n[0],i,s,o,u;n.length==2?i=n[1]:(i={})[n[1]]=n[2];for(property in i)s=new a(r,t,property,i[property]),e.components.push(s),o=s.points,u=o[o.length-1],u.Y>e.max&&(e.max=u.Y);return e}function p(t){return function(){var n=e.pageYOffset,r;for(var i=0;i<t.components.length;i++)r=t.components[i],r.set(n)}}function d(n){return function(){t.body.style.minHeight=n.max+e.innerHeight+"px"}}var i={};i.transform=function(e,t){this.fromValue=n(e),this.toValue=n(t)},i.transform.prototype={tween:function(e){var t=this.fromValue,n=this.toValue,r=[],i,s,o,u,a,f;for(var o in t){i=t[o],s=n[o]||i,f=[];for(u=0;u<i.length;u++)a=i[u].num+(s[u].num-i[u].num)*e,i[u].unit&&(a+=i[u].unit),f.push(a);f=f.join(","),r.push(o+"("+f+")")}return r.join(" ")}},i.default=function(e,t){this.fromValue=r(e),this.toValue=r(t)},i.default.prototype={tween:function(e){var t=this.fromValue,n=this.toValue,r=[],i,s,o;for(var u=0;u<t.length;u++)i=t[u],s=n[u],o=i.num+(s.num-i.num)*e,i.unit&&(o=new String(o)+i.unit),r.push(o);return r.join(" ")}};var s=function(e,t,n){n||(n=t),this.tweener=new(i[e]||i.default)(t.value,n.value),this.fromY=t.Y,this.toY=n.Y};s.prototype={current:function(e){var t=0,n=this.fromY,r=this.toY;return e>=n&&e<=r?t=(e-n)/(r-n):e>r&&(t=1),this.tweener.tween(t)}};var o=function(e,t){this.Y=e,this.value=t},u=function(e){var t=[],n=[];for(var r in e)t.push(parseInt(r));t.sort(function(e,t){return e-t});for(var i=0;i<t.length;i++)n.push(new o(t[i],e[t[i]]));return n},a=function(e,t,n,r){this.$el=e,this.property=n,this.points=u(r),this.child=new t(this)};a.prototype={set:function(e){var n=this.$el;n.nodeName?n=[n]:"string"==typeof n&&(n=t.querySelectorAll(n));for(var r=0;r<n.length;r++)n[r].style[this.property]=this.child.current(e)}};var f=function(e){var t=[],n=e.points,r,i;for(var o=0;o<n.length;o++)r=n[o],i=n[o+1],t.push(new s(property,r,i));this.tweens=t};f.prototype={current:function(e){var t=this.tweens,n=t.length,r,i;for(var s=0;s<n;s++){r=t[s];if(e>=r.fromY&&e<=r.toY||e<=r.fromY&&s==0||e>=r.toY&&s==n-1)break}return r.current(e)}};var l=function(e){this.points=e.points};l.prototype={current:function(e){var t=this.points,n=new String;for(var r=0;r<t.length;r++)point=t[r],e>=point.Y&&(n=point.value);return n}};var c=function(e){this.options=e||{},this.components=[],this.max=0};return c.prototype={animate:function(e,t,n){return h(this,f,arguments)},style:function(e,t,n){return h(this,l,arguments)},bind:function(){var t=p(this),n=d(this);e.addEventListener("scroll",t),e.addEventListener("resize",n),t(),n()}},c}"function"==typeof define&&define.amd?define(n):e.Roll=n()})(window,document);