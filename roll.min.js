/*!
* Copyright (c) 2015 Carrot Creative
*
* Permission is hereby granted, free of charge, to any person obtaining
* a copy of this software and associated documentation files (the
* "Software"), to deal in the Software without restriction, including
* without limitation the rights to use, copy, modify, merge, publish,
* distribute, sublicense, and/or sell copies of the Software, and to
* permit persons to whom the Software is furnished to do so, subject to
* the following conditions:
*
* The above copyright notice and this permission notice shall be
* included in all copies or substantial portions of the Software.
*
* THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
* EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
* MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
* NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
* LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
* OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
* WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
*/(function(e,t){function n(){function s(e){var t=[];return e=(new String(e)).replace(n,function(e){return t.push(parseFloat(e)),r}),[e,t]}function o(e,t,n){var r=0,s,o;return e[0].replace(i,function(){return from=e[1][r],to=t[1][r],r++,from+(to-from)*n})}function v(e,t,n){var r=n[0],i,s,o,u;n.length==2?i=n[1]:(i={})[n[1]]=n[2];for(property in i)s=new c(r,t,property,i[property]),e.components.push(s),o=s.points,u=o[o.length-1],u.Y>e.max&&(e.max=u.Y);return e}function m(t){return function(){var n=e.pageYOffset,r;for(var i=0;i<t.components.length;i++)r=t.components[i],r.set(n)}}function g(n){return function(){t.body.style.minHeight=n.max+e.innerHeight+"px"}}var n=/[\-+]?[\d]*\.?[\d]+/g,r="{?}",i=/\{\?\}/g,u={};u.default=function(e,t){this.fromValue=s(e),this.toValue=s(t)},u.default.prototype={tween:function(e){var t=this.fromValue,n=this.toValue;return o(t,n,e)}};var a=function(e,t,n){n||(n=t),this.tweener=new(u[e]||u.default)(t.value,n.value),this.fromY=t.Y,this.toY=n.Y};a.prototype={current:function(e){var t=0,n=this.fromY,r=this.toY;return e>=n&&e<=r?t=(e-n)/(r-n):e>r&&(t=1),this.tweener.tween(t)}};var f=function(e,t){this.Y=e,this.value=t},l=function(e){var t=[],n=[];for(var r in e)t.push(parseInt(r));t.sort(function(e,t){return e-t});for(var i=0;i<t.length;i++)n.push(new f(t[i],e[t[i]]));return n},c=function(e,t,n,r){this.$el=e,this.property=n,this.points=l(r),this.child=new t(this)};c.prototype={set:function(e){var n=this.$el;n.nodeName?n=[n]:"string"==typeof n&&(n=t.querySelectorAll(n));for(var r=0;r<n.length;r++)n[r].style[this.property]=this.child.current(e)}};var h=function(e){var t=[],n=e.points,r,i;for(var s=0;s<n.length;s++)r=n[s],i=n[s+1],t.push(new a(property,r,i));this.tweens=t};h.prototype={current:function(e){var t=this.tweens,n=t.length,r,i;for(var s=0;s<n;s++){r=t[s];if(e>=r.fromY&&e<=r.toY||e<=r.fromY&&s==0||e>=r.toY&&s==n-1)break}return r.current(e)}};var p=function(e){this.points=e.points};p.prototype={current:function(e){var t=this.points,n=new String;for(var r=0;r<t.length;r++)point=t[r],e>=point.Y&&(n=point.value);return n}};var d=function(e){this.options=e||{},this.components=[],this.max=0};return d.prototype={animate:function(e,t,n){return v(this,h,arguments)},style:function(e,t,n){return v(this,p,arguments)},bind:function(){var t=m(this),n=g(this);e.addEventListener("scroll",t),e.addEventListener("resize",n),t(),n()}},d}"function"==typeof define&&define.amd?define(n):e.Roll=n()})(window,document);